!function(P){"object"==typeof exports&&"undefined"!=typeof module?module.exports=P():"function"==typeof define&&define.amd?define([],P):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).rasterizeHTML=P()}(function(){return function P(q,R,S){function b(u,f){if(!R[u]){if(!q[u]){var h="function"==typeof require&&require;if(!f&&h)return h(u,!0);if(y)return y(u,!0);throw(h=new Error("Cannot find module '"+u+"'")).code="MODULE_NOT_FOUND",h}h=R[u]={exports:{}},q[u][0].call(h.exports,function(g){return b(q[u][1][g]||g)},h,h.exports,P,q,R,S)}return R[u].exports}for(var y="function"==typeof require&&require,w=0;w<S.length;w++)b(S[w]);return b}({1:[function(P,q,R){var S,b;b=function(y,w,u,f){var h=function(a){"use strict";var l={},r=[];return l.joinUrl=function(i,d){return i?a.resolve(i,d):d},l.getConstantUniqueIdFor=function(i){return r.indexOf(i)<0&&r.push(i),r.indexOf(i)},l.clone=function(i){var d,p={};for(d in i)i.hasOwnProperty(d)&&(p[d]=i[d]);return p},l.parseOptionalParameters=function(i){var d,p,n={canvas:null,options:{}};return null==i[0]||"object"==typeof(p=d=i[0])&&null!==p&&Object.prototype.toString.apply(d).match(/\[object (Canvas|HTMLCanvasElement)\]/i)?(n.canvas=i[0]||null,n.options=l.clone(i[1])):n.options=l.clone(i[0]),n},l}(y),g=function(a){"use strict";function l(i,d,p){var n=i[d];return i[d]=function(){var o=Array.prototype.slice.call(arguments);return p.apply(this,[o,n])},n}var r={baseUrlRespectingXhr:function(i,d){return function(){var p=new i;return l(p,"open",function(n,o){var e=n.shift(),t=n.shift();return t=a.joinUrl(d,t),o.apply(this,[e,t].concat(n))}),p}},finishNotifyingXhr:function(i){function d(){var s=new i;return l(s,"send",function(m,v){return n+=1,v.apply(this,arguments)}),s.addEventListener("load",function(){o+=1,p()}),s}var p,n=0,o=0,e=!1,t=new Promise(function(s){p=function(){n-o<=0&&e&&s({totalCount:n})}});return d.waitForRequestsToFinish=function(){return e=!0,p(),t},d}};return r}(h);return y=function(a){"use strict";function l(d){return Array.prototype.slice.call(d)}var r={},i={active:!0,hover:!0,focus:!1,target:!1};return r.fakeUserAction=function(d,p,n){var o=d.querySelector(p),e=":"+n;p="rasterizehtml"+n,o&&(i[n]?a.addClassNameRecursively(o,p):a.addClassName(o,p),a.rewriteCssSelectorWith(d,e,"."+p))},r.persistInputValues=function(d){function p(o){return"checkbox"===o.type||"radio"===o.type}var n=d.querySelectorAll("input");d=d.querySelectorAll("textarea"),l(n).filter(p).forEach(function(o){o.checked?o.setAttribute("checked",""):o.removeAttribute("checked")}),l(n).filter(function(o){return!p(o)}).forEach(function(o){o.setAttribute("value",o.value)}),l(d).forEach(function(o){o.textContent=o.value})},r.rewriteTagNameSelectorsToLowerCase=function(d){a.lowercaseCssTypeSelectors(d,a.findHtmlOnlyNodeNames(d))},r}(function(){"use strict";function a(p){return Array.prototype.slice.call(p)}var l={};function r(p,n,o){var e="((?:^|[^.#:\\w])|(?=\\W))("+n.join("|")+")(?=\\W|$)";a(p.querySelectorAll("style")).forEach(function(t){var s,m;void 0===t.sheet&&(s=t,m=document.implementation.createHTMLDocument(""),(v=document.createElement("style")).textContent=s.textContent,m.body.appendChild(v),s.sheet=v.sheet);var v=a(t.sheet.cssRules).filter(function(c){return c.selectorText&&new RegExp(e,"i").test(c.selectorText)});v.length&&(v.forEach(function(c){var C,U=c.selectorText.replace(new RegExp(e,"gi"),function(T,j,k){return j+o(k)});U!==c.selectorText&&(C=U,c=(U=c).cssText.replace(/^[^\{]+/,""),i(U,C+" "+c))}),t.textContent=d(t.sheet.cssRules))})}l.addClassName=function(p,n){p.className+=" "+n},l.addClassNameRecursively=function(p,n){l.addClassName(p,n),p.parentNode!==p.ownerDocument&&l.addClassNameRecursively(p.parentNode,n)};var i=function(p,n){var o=p.parentStyleSheet;p=a(o.cssRules).indexOf(p),o.insertRule(n,p+1),o.deleteRule(p)},d=function(p){return a(p).reduce(function(n,o){return n+o.cssText},"")};return l.rewriteCssSelectorWith=function(p,n,o){r(p,[n],function(){return o})},l.lowercaseCssTypeSelectors=function(p,n){r(p,n,function(o){return o.toLowerCase()})},l.findHtmlOnlyNodeNames=function(p){for(var n,o=p.ownerDocument.createTreeWalker(p,NodeFilter.SHOW_ELEMENT),e={},t={};n=o.currentNode.tagName.toLowerCase(),"http://www.w3.org/1999/xhtml"===o.currentNode.namespaceURI?e[n]=!0:t[n]=!0,o.nextNode(););return Object.keys(e).filter(function(s){return!t[s]})},l}()),g=function(a,l,r,i){"use strict";var d={};function n(t){try{return r.failOnParseError(t)}catch(s){throw{message:"Invalid source",originalError:s}}}d.executeJavascript=function(t,s){return new Promise(function(m){function v(){i.document.getElementsByTagName("body")[0].removeChild(C)}function c(){m({document:C.contentDocument,errors:T,cleanUp:v})}var x,A,L,N,C=(L=s.width,N=s.height,(A=(x=i.document).createElement(A="iframe")).style.visibility="hidden",A.style.width=L+"px",A.style.height=N+"px",A.style.position="absolute",A.style.top=-1e4-N+"px",A.style.left=-1e4-L+"px",x.getElementsByTagName("body")[0].appendChild(A),A),U=t.outerHTML,T=[],j=s.executeJsTimeout||0,I=l.finishNotifyingXhr(C.contentWindow.XMLHttpRequest),k=l.baseUrlRespectingXhr(I,s.baseUrl);C.onload=function(){var x;(0<(x=j)?new Promise(function(A){setTimeout(A,x)}):Promise.resolve()).then(I.waitForRequestsToFinish).then(c)},C.contentDocument.open(),C.contentWindow.XMLHttpRequest=k,C.contentWindow.onerror=function(x){T.push({resourceType:"scriptExecution",msg:x})},C.contentDocument.write("<!DOCTYPE html>"),C.contentDocument.write(U),C.contentDocument.close()})},d.calculateDocumentContentSize=function(t,s){return new Promise(function(m,v){var c,C,j,k,I,x,A,L,U=s.zoom||1,T=(j=s.width,k=s.height,I=U,A=j=Math.floor(j/I),L=I=Math.floor(k/I),(x=(x=i.document).createElement("iframe")).style.width=A+"px",x.style.height=L+"px",x.style.visibility="hidden",x.style.position="absolute",x.style.top=-1e4-L+"px",x.style.left=-1e4-A+"px",x.style.borderWidth=0,x.sandbox="allow-same-origin",x.scrolling="no",x);i.document.getElementsByTagName("body")[0].appendChild(T),T.onload=function(){var j,k=T.contentDocument;try{j=function(t,s,m,v,c){var C,U,T,j=Math.max(t.scrollWidth,t.clientWidth),k=Math.max(t.scrollHeight,t.clientHeight),I=s?(C=(I=function(x,A){var L=x.querySelector(A);if(L)return L;if(x.ownerDocument.querySelector(A)===x)return x;throw{message:"Clipping selector not found"}}(t,s).getBoundingClientRect()).top,U=I.left,T=I.width,I.height):(U=C=0,T=j,k);return I={width:T,height:I},v=v,c=c,v={width:Math.max(I.width*c,m),height:Math.max(I.height*c,v)},t=i.getComputedStyle(t.ownerDocument.documentElement).fontSize,{left:U,top:C,width:v.width,height:v.height,viewportWidth:j,viewportHeight:k,rootFontSize:t}}(function(I,x){return x.querySelector(I=I.tagName)}(t,k),s.clip,s.width,s.height,U),m(j)}catch(I){v(I)}finally{i.document.getElementsByTagName("body")[0].removeChild(T)}},T.contentDocument.open(),T.contentDocument.write("<!DOCTYPE html>"),T.contentDocument.write("html"===(C=(c=t).tagName.toLowerCase())||"body"===C?c.outerHTML:'<body style="margin: 0;">'+c.outerHTML+"</body>"),T.contentDocument.close()})},d.parseHtmlFragment=function(t){var s=i.document.implementation.createHTMLDocument("");if(s.documentElement.innerHTML=t,!(s=s.querySelector("body").firstChild))throw"Invalid source";return s},d.parseHTML=function(t){var s=i.document.implementation.createHTMLDocument("");return s.documentElement.innerHTML=t,function(m,v){var c,C,U,T=/<html((?:\s+[^>]*)?)>/im.exec(v);if(v=i.document.implementation.createHTMLDocument(""),T)for(v.documentElement.innerHTML=T="<div"+T[1]+"></div>",C=v.querySelector("div"),c=0;c<C.attributes.length;c++)m.documentElement.setAttribute((U=C.attributes[c]).name,U.value)}(s,t),s},d.validateXHTML=function(t){n(t=(new DOMParser).parseFromString(t,"application/xml"))};var e=null;return d.loadDocument=function(t,s){return function(t,s){return new Promise(function(m,v){function c(j){v({message:"Unable to load page",originalError:j})}var C=new window.XMLHttpRequest,U=a.joinUrl(s.baseUrl,t),T=(T=U,"none"===(U=s.cache)||"repeated"===U?T+"?_="+(e=null===e||"repeated"!==U?Date.now():e):T);C.addEventListener("load",function(){200===C.status||0===C.status?m(C.responseXML):c(C.statusText)},!1),C.addEventListener("error",function(j){c(j)},!1);try{C.open("GET",T,!0),C.responseType="document",C.send(null)}catch(j){c(j)}})}(t,s).then(n)},d}(h,g,u,window),u=function(a){"use strict";function l(t,s){return s?URL.createObjectURL(new Blob([t],{type:"image/svg+xml"})):"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(t)}function r(t){t instanceof Blob&&URL.revokeObjectURL(t)}function i(t){return new Promise(function(s,m){var v=document.createElement("canvas"),c=new Image;c.onload=function(){var C=v.getContext("2d");try{C.drawImage(c,0,0),v.toDataURL("image/png"),s(!0)}catch(U){s(!1)}},c.onerror=m,c.src=t})}var p,n={},o='<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"><foreignObject></foreignObject></svg>';return n.renderSvg=function(t){return new Promise(function(s,m){function v(){c&&r(c)}var c,C=new Image;C.onload=function(){C.onload=null,C.onerror=null,v(),s(C)},C.onerror=function(){v(),m()},function(t){return(p=void 0===p?new Promise(function(t,s){var m;(function(){if(a.Blob)try{return new Blob(["<b></b>"],{type:"text/xml"}),!0}catch(v){}return!1})()&&a.URL?i(m=l(o,!0)).then(function(v){return r(m),!v&&i(l(o,!1)).then(function(c){return c})},function(){return!1}).then(function(v){t(!v)},function(){s()}):t(!1)}):p).then(function(s){return l(t,s)})}(t).then(function(U){C.src=c=U},m)})},n}(window),function(a,l,r){"use strict";var i={};function d(p,n,o){return l.loadDocument(p,o).then(function(e){return t=e,s=p,m=o,(v=document.implementation.createHTMLDocument("")).replaceChild(t.documentElement,v.documentElement),t=m?a.clone(m):{},m.baseUrl||(t.baseUrl=s),i.drawDocument((e={document:v,options:t}).document,n,e.options);var t,s,m,v})}return i.drawDocument=function(){var p=arguments[0],n=Array.prototype.slice.call(arguments,1),o=a.parseOptionalParameters(n),e=p.documentElement||p;return r.rasterize(e,o.canvas,(o=(p=(n=o).canvas)?p.width:300,p=p?p.height:200,p={width:void 0!==(e=n.options).width?e.width:o,height:void 0!==e.height?e.height:p},(n=a.clone(n.options)).width=p.width,n.height=p.height,n))},i.drawHTML=function(){var o,e,t,p=arguments[0],n=Array.prototype.slice.call(arguments,1);return e=(n=a.parseOptionalParameters(n)).canvas,t=n.options,o=l.parseHTML(o=p),i.drawDocument(o,e,t)},i.drawURL=function(){var p=arguments[0],n=Array.prototype.slice.call(arguments,1);return d(p,(n=a.parseOptionalParameters(n)).canvas,n.options)},i}(h,g,function(a,l,r,i,d,p){"use strict";function n(s){return d.renderSvg(s).then(function(m){return{image:m,svg:s}},function(m){throw t(m)})}var e={},t=function(s){return{message:"Error rendering page",originalError:s}};return e.rasterize=function(s,m,v){var c=a.clone(v);return c.inlineScripts=!0===v.executeJs,p.inlineReferences(s,c).then(function(C){return v.executeJs?l.executeJavascript(s,v).then(function(U){var T=U.document;return r.persistInputValues(T),{document:T,errors:U.errors,cleanUp:U.cleanUp}}).then(function(U){return{element:U.document.documentElement,errors:C.concat(U.errors),cleanUp:U.cleanUp}}):{element:s,errors:C,cleanUp:function(){}}}).then(function(C){return function(s,m,v){return i.drawDocumentAsSvg(s,v).then(n).then(function(c){return m&&function(C,U){try{U.getContext("2d").drawImage(C,0,0)}catch(T){throw t(T)}}(c.image,m),c})}(C.element,m,v).then(function(U){return C.cleanUp(),{image:U.image,svg:U.svg,errors:C.errors}})})},e}(h,g,y,function(a,l,r){"use strict";function i(n){var o=Object.keys(n);return o.length?" "+o.map(function(e){return e+'="'+n[e]+'"'}).join(" "):""}var p={getSvgForDocument:function(n,o,e){return l.rewriteTagNameSelectorsToLowerCase(n),function(n,o,e){var t,s,v,c,m=r.serializeToString(n);return a.validateXHTML(m),(t=o,s=Math.round(t.viewportWidth),n=Math.round(t.viewportHeight),n={x:-t.left,y:-t.top,width:s,height:n}).style=(n.style||"")+"float: left;",n.externalResourcesRequired=!0,'<svg xmlns="http://www.w3.org/2000/svg"'+i((v={width:(v=o).width,height:v.height,"font-size":v.rootFontSize},1!==(c=(c=e)||1)&&(v.style="transform:scale("+c+"); transform-origin: 0 0;"),v))+'><style scoped="">html::-webkit-scrollbar { display: none; }</style><foreignObject'+i(n)+">"+m+"</foreignObject></svg>"}(n,o,e)},drawDocumentAsSvg:function(n,o){return["hover","active","focus","target"].forEach(function(e){o[e]&&l.fakeUserAction(n,o[e],e)}),a.calculateDocumentContentSize(n,o).then(function(e){return p.getSvgForDocument(n,e,o.zoom)})}};return p}(g,y,w),u,f))},void 0===(S=this)&&void 0!==window&&(S=window),"object"==typeof q&&q.exports?q.exports=b(P("url"),P("xmlserializer"),P("sane-domparser-error"),P("inlineresources")):S.rasterizeHTML=b(S.url,S.xmlserializer,S.sanedomparsererror,S.inlineresources)},{inlineresources:5,"sane-domparser-error":14,url:15,xmlserializer:17}],2:[function(P,q,R){(function(S){(function(){!function(b){"object"==typeof R&&void 0!==q?q.exports=b():("undefined"!=typeof window?window:void 0!==S?S:"undefined"!=typeof self?self:this).cssFontFaceSrc=b()}(function(){return function b(y,w,u){function f(a,l){if(!w[a]){if(!y[a]){var r="function"==typeof P&&P;if(!l&&r)return r(a,!0);if(h)return h(a,!0);throw(r=new Error("Cannot find module '"+a+"'")).code="MODULE_NOT_FOUND",r}r=w[a]={exports:{}},y[a][0].call(r.exports,function(i){return f(y[a][1][i]||i)},r,r.exports,b,y,w,u)}return w[a].exports}for(var h="function"==typeof P&&P,g=0;g<u.length;g++)f(u[g]);return f}({1:[function(b,y,w){"use strict";function u(a,l,r,i){this.message=a,this.expected=l,this.found=r,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,u)}function f(){this.constructor=h}var h,g;h=u,g=Error,f.prototype=g.prototype,h.prototype=new f,u.buildMessage=function(a,l){var r={literal:function(n){return'"'+d(n.text)+'"'},class:function(n){for(var o="",e=0;e<n.parts.length;e++)o+=n.parts[e]instanceof Array?p(n.parts[e][0])+"-"+p(n.parts[e][1]):p(n.parts[e]);return"["+(n.inverted?"^":"")+o+"]"},any:function(n){return"any character"},end:function(n){return"end of input"},other:function(n){return n.description}};function i(n){return n.charCodeAt(0).toString(16).toUpperCase()}function d(n){return n.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(o){return"\\x0"+i(o)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(o){return"\\x"+i(o)})}function p(n){return n.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(o){return"\\x0"+i(o)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(o){return"\\x"+i(o)})}return"Expected "+function(n){for(var o,e,t=new Array(n.length),s=0;s<n.length;s++)t[s]=r[(e=n[s]).type](e);if(t.sort(),0<t.length){for(o=s=1;s<t.length;s++)t[s-1]!==t[s]&&(t[o]=t[s],o++);t.length=o}switch(t.length){case 1:return t[0];case 2:return t[0]+" or "+t[1];default:return t.slice(0,-1).join(", ")+", or "+t[t.length-1]}}(a)+" but "+((l=l)?'"'+d(l)+'"':"end of input")+" found."},y.exports={SyntaxError:u,parse:function(a,l){var r={},i={start:at},d=at,e=X(",",!1),c="url(",C=X("url(",!1),T=X(")",!1),j="format(",k=X("format(",!1),I="local(",x=X("local(",!1),L=/^[^)]/,N=z([")"],!0,!1),$=/^[ \t\r\n\f]/,_=z([" ","\t","\r","\n","\f"],!1,!1),E=0,V=[{line:1,column:1}],W=0,J=[];if("startRule"in(l=void 0!==l?l:{})){if(!(l.startRule in i))throw new Error("Can't start parsing from rule \""+l.startRule+'".');d=i[l.startRule]}function X(O,D){return{type:"literal",text:O,ignoreCase:D}}function z(O,D,F){return{type:"class",parts:O,inverted:D,ignoreCase:F}}function et(O){var D,F=V[O];if(F)return F;for(D=O-1;!V[D];)D--;for(F={line:(F=V[D]).line,column:F.column};D<O;)10===a.charCodeAt(D)?(F.line++,F.column=1):F.column++,D++;return V[O]=F}function Z(O){E<W||(W<E&&(W=E,J=[]),J.push(O))}function at(){var O,D=function F(){var H,Y,Q,K,nt,tt;if(H=E,(Y=it())!==r){for(Q=[],K=rt();K!==r;)Q.push(K),K=rt();if(Q!==r)if(44===a.charCodeAt(E)?(K=",",E++):(K=r,Z(e)),K!==r){for(nt=[],tt=rt();tt!==r;)nt.push(tt),tt=rt();H=nt!==r&&(tt=F())!==r?Y=function(O,D){return[O].concat(D)}(Y,tt):(E=H,r)}else E=H,H=r;else E=H,H=r}else E=H,H=r;return H===r&&(H=E,(Y=it())!==r&&(Y=function(O){return[O]}(Y)),H=Y),H}();return D===r&&(D=E,(O="")!==r&&(O=[]),D=O),D}function it(){var D,F,H,Y,O=function(){var D,F,H,Y,Q,K,nt,tt;if(D=E,(F=st())!==r){if(H=[],(Y=rt())!==r)for(;Y!==r;)H.push(Y),Y=rt();else H=r;D=H!==r&&(Q=E,a.substr(E,7)===j?(K=j,E+=7):(K=r,Z(k)),(Y=Q=K!==r&&(nt=ot())!==r?(41===a.charCodeAt(E)?(tt=")",E++):(tt=r,Z(T)),tt!==r?K=nt:(E=Q,r)):(E=Q,r))!==r)?F=function(O,D){return{url:O,format:D}}(F,Y):(E=D,r)}else E=D,D=r;return D===r&&(D=E,(F=st())!==r&&(F=function(O){return{url:O}}(F)),D=F),D}();return O===r?(D=E,a.substr(E,6)===I?(F=I,E+=6):(F=r,Z(x)),D=F!==r&&(H=ot())!==r?(41===a.charCodeAt(E)?(Y=")",E++):(Y=r,Z(T)),Y!==r?F=function(O){return{local:O}}(H):(E=D,r)):(E=D,r),D):O}function st(){var O,D,F,H=E;return a.substr(E,4)===c?(O=c,E+=4):(O=r,Z(C)),O!==r&&(D=ot())!==r?(41===a.charCodeAt(E)?(F=")",E++):(F=r,Z(T)),F!==r?O=D:(E=H,r)):(E=H,r)}function ot(){var O,F=[];if(L.test(a.charAt(E))?(O=a.charAt(E),E++):(O=r,Z(N)),O!==r)for(;O!==r;)F.push(O),L.test(a.charAt(E))?(O=a.charAt(E),E++):(O=r,Z(N));else F=r;return F!==r&&(F=function(O){return ct.extractValue(O.join(""))}(F)),F}function rt(){var O;return $.test(a.charAt(E))?(O=a.charAt(E),E++):(O=r,Z(_)),O}var O,D,F,ct=b("../util");if((d=d())!==r&&E===a.length)return d;throw d!==r&&E<a.length&&Z({type:"end"}),O=J,D=W<a.length?a.charAt(W):null,F=function(O,D){var F=et(O),H=et(D);return{start:{offset:O,line:F.line,column:F.column},end:{offset:D,line:H.line,column:H.column}}}(W,W<a.length?W+1:W),new u(u.buildMessage(O,D),O,D,F)}}},{"../util":3}],2:[function(b,y,w){var u=b("./grammar");w.SyntaxError=function(f,h){this.message=f,this.offset=h},w.parse=function(f){try{return u.parse(f)}catch(h){throw new w.SyntaxError(h.message,h.offset)}},w.serialize=function(f){return f.map(function(h){var g;return h.url?(g='url("'+h.url+'")',h.format&&(g+=' format("'+h.format+'")')):g='local("'+h.local+'")',g}).join(", ")}},{"./grammar":1}],3:[function(b,y,w){w.extractValue=function(u){return f=u.replace(/^[\t\r\f\n ]*(.+?)[\t\r\f\n ]*$/,"$1"),h=/^'(.*)'$/,(u=/^"(.*)"$/).test(f)?f.replace(u,"$1"):h.test(f)?f.replace(h,"$1"):f;var f,h}},{}]},{},[2])(2)})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(P,q,R){"use strict";var S=P("./cssSupport");R.extractCssUrl=function(y){var w=/^url\(("[^"]+"|'[^']+'|[^\)]+)\)/;if(!w.test(y))throw new Error("Invalid url");return y=w.exec(y)[1],S.unquoteString(y.replace(/^[\t\r\f\n ]*(.+?)[\t\r\f\n ]*$/,"$1"))},R.parse=function(y){return function(y){var w,h=new RegExp("(?:\\s*(url\\(\\s*(?:\"[^\"]*\"|'[^']*'|[^\\(]+)\\s*\\)|[^,\\s]+))+","g"),g=[];if(y.match(new RegExp("^\\s*((?:\\s*(url\\(\\s*(?:\"[^\"]*\"|'[^']*'|[^\\(]+)\\s*\\)|[^,\\s]+))+)(?:\\s*,\\s*((?:\\s*(url\\(\\s*(?:\"[^\"]*\"|'[^']*'|[^\\(]+)\\s*\\)|[^,\\s]+))+))*\\s*$"))){for(w=h.exec(y);w;)g.push(function(a){for(var l=new RegExp("(url\\(\\s*(?:\"[^\"]*\"|'[^']*'|[^\\(]+)\\s*\\)|[^,\\s]+)","g"),r=[],i=l.exec(a);i;)r.push(i[1]),i=l.exec(a);return r}(w[0])),w=h.exec(y);return g}return[]}(y).map(function(w){var u=function(f){for(var h=0;h<f.length;h++)try{return{url:R.extractCssUrl(f[h]),idx:h}}catch(g){}}(w);return u?{preUrl:w.slice(0,u.idx),url:u.url,postUrl:w.slice(u.idx+1)}:{preUrl:w}})},R.serialize=function(y){return y.map(function(w){var u=[].concat(w.preUrl);return w.url&&u.push('url("'+w.url+'")'),(u=w.postUrl?u.concat(w.postUrl):u).join(" ")}).join(", ")}},{"./cssSupport":4}],4:[function(P,q,R){"use strict";R.unquoteString=function(S){var b=/^"(.*)"$/,y=/^'(.*)'$/;return b.test(S)?S.replace(b,"$1"):y.test(S)?S.replace(y,"$1"):S},R.rulesForCssText=function(S){var b=document.implementation.createHTMLDocument(""),y=document.createElement("style");return y.textContent=S,b.body.appendChild(y),y=y.sheet.cssRules,Array.prototype.slice.call(y)},R.cssRulesToText=function(S){return S.reduce(function(b,y){return b+y.cssText},"")},R.exchangeRule=function(S,b,y){b=S.indexOf(b),S[b]=R.rulesForCssText(y)[0]},R.changeFontFaceRuleSrc=function(S,b,y){var w="@font-face { font-family: "+b.style.getPropertyValue("font-family")+"; ";b.style.getPropertyValue("font-style")&&(w+="font-style: "+b.style.getPropertyValue("font-style")+"; "),b.style.getPropertyValue("font-weight")&&(w+="font-weight: "+b.style.getPropertyValue("font-weight")+"; "),b.style.getPropertyValue("unicode-range")&&(w+="unicode-range: "+b.style.getPropertyValue("unicode-range")+"; "),R.exchangeRule(S,b,w+="src: "+y+"}")}},{}],5:[function(P,q,R){"use strict";function S(l,r){return!1!==r.cache&&"none"!==r.cache&&r.cacheBucket?y.memoize(l,g,r.cacheBucket):l}function b(l,r,i){var d=h.rulesForCssText(l);return f.loadCSSImportsForRules(d,r,i).then(function(p){return f.loadAndInlineCSSResourcesForRules(d,i).then(function(n){var o=p.errors.concat(n.errors);return{hasChanges:n=p.hasChanges||n.hasChanges,content:l=n?h.cssRulesToText(d):l,errors:o}})})}var y=P("./util"),w=P("./inlineImage"),u=P("./inlineScript"),f=P("./inlineCss"),h=P("./cssSupport"),g=function(l){return l.map(function(r,i){return i===l.length-1&&(r={baseUrl:(i=r.baseUrl,y.joinUrl(i,"."))}),JSON.stringify(r)})};function a(l,r){return y.ajax(l,r).then(function(i){return{content:i,cssRules:h.rulesForCssText(i)}}).then(function(i){var d=f.adjustPathsOfCssResources(l,i.cssRules);return{content:i.content,cssRules:i.cssRules,hasChanges:d}}).then(function(i){return f.loadCSSImportsForRules(i.cssRules,[],r).then(function(d){return{content:i.content,cssRules:i.cssRules,hasChanges:i.hasChanges||d.hasChanges,errors:d.errors}})}).then(function(i){return f.loadAndInlineCSSResourcesForRules(i.cssRules,r).then(function(d){return{content:i.content,cssRules:i.cssRules,hasChanges:i.hasChanges||d.hasChanges,errors:i.errors.concat(d.errors)}})}).then(function(i){var d=i.content;return{content:d=i.hasChanges?h.cssRulesToText(i.cssRules):d,errors:i.errors}})}R.loadAndInlineStyles=function(l,r){var o,i=(o=(o=l).getElementsByTagName("style"),Array.prototype.filter.call(o,function(e){return!e.attributes.type||"text/css"===e.attributes.type.value})),d=[],p=[],n=y.clone(r);return n.baseUrl=n.baseUrl||y.getDocumentBaseUrl(l),Promise.all(i.map(function(o){return s=p,o=(e=o).textContent,S(b,t=n)(o,s,t).then(function(m){return m.hasChanges&&(e.childNodes[0].nodeValue=m.content),y.cloneArray(m.errors)}).then(function(m){d=d.concat(m)});var e,t,s})).then(function(){return d})},R.loadAndInlineCssLinks=function(l,r){d=(d=l).getElementsByTagName("link"),l=Array.prototype.filter.call(d,function(p){return p.attributes.rel&&"stylesheet"===p.attributes.rel.value&&(!p.attributes.type||"text/css"===p.attributes.type.value)});var d,i=[];return Promise.all(l.map(function(d){return n=r,o=(p=d).attributes.href.value,e=y.getDocumentBaseUrl(p.ownerDocument),!(p=y.clone(n)).baseUrl&&e&&(p.baseUrl=e),S(a,n)(o,p).then(function(t){return{content:t.content,errors:y.cloneArray(t.errors)}}).then(function(t){var s,m,v,c;c=(s=d).parentNode,(m=(m=t.content+"\n").trim())&&((v=s.ownerDocument.createElement("style")).type="text/css",v.appendChild(s.ownerDocument.createTextNode(m)),c.insertBefore(v,s)),c.removeChild(s),i=i.concat(t.errors)},function(t){i.push({resourceType:"stylesheet",url:t.url,msg:"Unable to load stylesheet "+t.url})});var p,n,o,e})).then(function(){return i})},R.loadAndInlineImages=w.inline,R.loadAndInlineScript=u.inline,R.inlineReferences=function(l,r){var i=[],d=[R.loadAndInlineImages,R.loadAndInlineStyles,R.loadAndInlineCssLinks];return!1!==r.inlineScripts&&d.push(R.loadAndInlineScript),Promise.all(d.map(function(p){return p(l,r).then(function(n){i=i.concat(n)})})).then(function(){return i})}},{"./cssSupport":4,"./inlineCss":6,"./inlineImage":7,"./inlineScript":8,"./util":9}],6:[function(P,q,R){"use strict";function S(n,o,e){n.style.setProperty(o,e,n.style.getPropertyPriority(o))}function b(n){return n.filter(function(o){return o.type===window.CSSRule.STYLE_RULE&&(o.style.getPropertyValue("background-image")||o.style.getPropertyValue("background"))})}function y(n){var o=[];return n.forEach(function(e){e.style.getPropertyValue("background-image")?o.push({property:"background-image",value:e.style.getPropertyValue("background-image"),rule:e}):e.style.getPropertyValue("background")&&o.push({property:"background",value:e.style.getPropertyValue("background"),rule:e})}),o}function w(n){return n.filter(function(o){return o.type===window.CSSRule.FONT_FACE_RULE&&o.style.getPropertyValue("src")})}function u(n){return n.filter(function(o){return o.type===window.CSSRule.IMPORT_RULE&&o.href})}var f=P("./util"),h=P("./cssSupport"),g=P("./backgroundValueParser"),a=P("css-font-face-src"),l=function(n){var o=[];return n.forEach(function(e,t){e.url&&!f.isDataUri(e.url)&&o.push(t)}),o},r=function(n){var o=[];return n.forEach(function(e,t){e.url&&!f.isDataUri(e.url)&&o.push(t)}),o};function i(n,o,e){var t=n.indexOf(o);n.splice(t,1),e.forEach(function(s,m){n.splice(t+m,0,s)})}function d(n,o){n=y(n=b(n));var e=[],t=!1;return Promise.all(n.map(function(s){return v=o,c=g.parse(m=s.value),m=l(c),C=!1,f.collectAndReportErrors(m.map(function(U){return f.getDataURIForImageURL(c[U].url,v).then(function(j){c[U].url=j,C=!0},function(j){throw{resourceType:"backgroundImage",url:j.url,msg:"Unable to load background-image "+j.url}})})).then(function(U){return{backgroundValue:g.serialize(c),hasChanges:C,errors:U}}).then(function(U){U.hasChanges&&(S(s.rule,s.property,U.backgroundValue),t=!0),e=e.concat(U.errors)});var m,v,c,C})).then(function(){return{hasChanges:t,errors:e}})}function p(n,o){var e=w(n),t=[],s=!1;return Promise.all(e.map(function(m){return function(v,c){var C,U=!1;try{C=a.parse(v)}catch(T){C=[]}return v=r(C),f.collectAndReportErrors(v.map(function(T){var j=C[T],k=j.format||"woff";return f.binaryAjax(j.url,c).then(function(I){I=btoa(I),j.url="data:font/"+k+";base64,"+I,U=!0},function(I){throw{resourceType:"fontFace",url:I.url,msg:"Unable to load font-face "+I.url}})})).then(function(T){return{srcDeclarationValue:a.serialize(C),hasChanges:U,errors:T}})}(m.style.getPropertyValue("src"),o).then(function(v){v.hasChanges&&(h.changeFontFaceRuleSrc(n,m,v.srcDeclarationValue),s=!0),t=t.concat(v.errors)})})).then(function(){return{hasChanges:s,errors:t}})}R.adjustPathsOfCssResources=function(n,o){var e=y(e=b(o)),t=!1;return e.forEach(function(s){var m=g.parse(s.value),v=l(m);0<v.length&&(v.forEach(function(c){var C=f.joinUrl(n,C=m[c].url);m[c].url=C}),v=g.serialize(m),S(s.rule,s.property,v),t=!0)}),w(o).forEach(function(s){var m,v=s.style.getPropertyValue("src");try{m=a.parse(v)}catch(c){return}0<(v=r(m)).length&&(v.forEach(function(c){var C=f.joinUrl(n,C=m[c].url);m[c].url=C}),h.changeFontFaceRuleSrc(o,s,a.serialize(m)),t=!0)}),u(o).forEach(function(s){var m=f.joinUrl(n,m=s.href);h.exchangeRule(o,s,"@import url("+m+");"),t=!0}),t},R.loadCSSImportsForRules=function(n,o,e){var t=u(n),s=[],m=!1;return Promise.all(t.map(function(v){return c=n,U=o,T=e,j=(C=v).href,j=h.unquoteString(j),v=f.joinUrl(T.baseUrl,j),(0<=U.indexOf(v)?(i(c,C,[]),Promise.resolve([])):(U.push(v),f.ajax(j,T).then(function(k){var I=h.rulesForCssText(k);return R.loadCSSImportsForRules(I,U,T).then(function(x){return R.adjustPathsOfCssResources(j,I),i(c,C,I),x.errors})},function(k){throw{resourceType:"stylesheet",url:k.url,msg:"Unable to load stylesheet "+k.url}}))).then(function(k){s=s.concat(k),m=!0},function(k){s.push(k)});var c,C,U,T,j})).then(function(){return{hasChanges:m,errors:s}})},R.loadAndInlineCSSResourcesForRules=function(n,o){var e=!1,t=[];return Promise.all([d,p].map(function(s){return s(n,o).then(function(m){e=e||m.hasChanges,t=t.concat(m.errors)})})).then(function(){return{hasChanges:e,errors:t}})}},{"./backgroundValueParser":3,"./cssSupport":4,"./util":9,"css-font-face-src":2}],7:[function(P,q,R){"use strict";function S(y){return Array.prototype.slice.call(y)}var b=P("./util");R.inline=function(y,w){var u=S(y.getElementsByTagName("img")),f=S(y.getElementsByTagName("image"));return y=y.getElementsByTagName("input"),y=Array.prototype.filter.call(y,function(h){return"image"===h.type}),u=(u=(u=u.concat(f)).concat(y)).filter(function(h){var g=null;return h.hasAttribute("src")?g=h.getAttribute("src"):h.hasAttributeNS("http://www.w3.org/1999/xlink","href")?g=h.getAttributeNS("http://www.w3.org/1999/xlink","href"):h.hasAttribute("href")&&(g=h.getAttribute("href")),null!==g&&!b.isDataUri(g)}),b.collectAndReportErrors(u.map(function(h){return(g=h,a=w,l=null,g.hasAttribute("src")?l=g.getAttribute("src"):g.hasAttributeNS("http://www.w3.org/1999/xlink","href")?l=g.getAttributeNS("http://www.w3.org/1999/xlink","href"):g.hasAttribute("href")&&(l=g.getAttribute("href")),g=b.getDocumentBaseUrl(g.ownerDocument),!(a=b.clone(a)).baseUrl&&g&&(a.baseUrl=g),b.getDataURIForImageURL(l,a).then(function(r){return r},function(r){throw{resourceType:"image",url:r.url,msg:"Unable to load image "+r.url}})).then(function(g){h.attributes.src?h.attributes.src.value=g:h.attributes["xlink:href"]?h.attributes["xlink:href"].value=g:h.attributes.href&&(h.attributes.href.value=g)});var g,a,l}))}},{"./util":9}],8:[function(P,q,R){"use strict";var S=P("./util");R.inline=function(b,y){return w=(w=b).getElementsByTagName("script"),b=Array.prototype.filter.call(w,function(u){return!!u.attributes.src}),S.collectAndReportErrors(b.map(function(w){return f=y,h=(u=w).attributes.src.value,u=S.getDocumentBaseUrl(u.ownerDocument),!(f=S.clone(f)).baseUrl&&u&&(f.baseUrl=u),S.ajax(h,f).catch(function(g){throw{resourceType:"script",url:g.url,msg:"Unable to load script "+g.url}}).then(function(g){var a;a=g,(g=w).attributes.removeNamedItem("src"),g.textContent=a.replace(/<\//g,"<\\/")});var u,f,h}));var w}},{"./util":9}],9:[function(P,q,R){"use strict";var S=P("url");R.getDocumentBaseUrl=function(u){return"about:blank"!==u.baseURI?u.baseURI:null},R.clone=function(u){var f,h={};for(f in u)u.hasOwnProperty(f)&&(h[f]=u[f]);return h},R.cloneArray=function(u){return Array.prototype.slice.apply(u,[0])},R.joinUrl=function(u,f){return u?S.resolve(u,f):f},R.isDataUri=function(u){return/^data:/.test(u)},R.collectAndReportErrors=function(u){var f=[];return Promise.all(u.map(function(h){return h.catch(function(g){f.push(g)})})).then(function(){return f})};var b=null;R.ajax=function(u,f){return new Promise(function(h,g){function a(){g({msg:"Unable to load url",url:d})}var l,r,i=new window.XMLHttpRequest,d=R.joinUrl(f.baseUrl,u);l=d,l=!1===(r=f.cache)||"none"===r||"repeated"===r?l+"?_="+(b=null===b||"repeated"!==r?Date.now():b):l,i.addEventListener("load",function(){200===i.status||0===i.status?h(i.response):a()},!1),i.addEventListener("error",a,!1);try{i.open("GET",l,!0),i.overrideMimeType(f.mimeType),i.send(null)}catch(p){a()}})},R.binaryAjax=function(u,f){return(f=R.clone(f)).mimeType="text/plain; charset=x-user-defined",R.ajax(u,f).then(function(h){for(var g="",a=0;a<h.length;a++)g+=String.fromCharCode(255&h.charCodeAt(a));return g})},R.getDataURIForImageURL=function(u,f){return R.binaryAjax(u,f).then(function(h){var g=btoa(h);return"data:"+function(u){function f(h,g){return h.substring(0,g.length)===g}return f(u,"<?xml")||f(u,"<svg")?"image/svg+xml":"image/png"}(h)+";base64,"+g})};var w=[];R.memoize=function(u,f,h){if("object"!=typeof h)throw new Error("cacheBucket is not an object");return function(){var g=Array.prototype.slice.call(arguments),a=f(g),l=(w.indexOf(l=u)<0&&w.push(l),w.indexOf(l));return h[l]&&h[l][a]?h[l][a]:(g=u.apply(null,g),h[l]=h[l]||{},h[l][a]=g)}}},{url:15}],10:[function(P,q,R){(function(S){(function(){!function(b){var y="object"==typeof R&&R&&!R.nodeType&&R,w="object"==typeof q&&q&&!q.nodeType&&q,u="object"==typeof S&&S;u.global!==u&&u.window!==u&&u.self!==u||(b=u);var f,h,g=2147483647,a=36,d=/^xn--/,p=/[^\x20-\x7E]/,n=/[\x2E\u3002\uFF0E\uFF61]/g,o={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},t=Math.floor,s=String.fromCharCode;function m(x){throw RangeError(o[x])}function v(x,A){for(var L=x.length,N=[];L--;)N[L]=A(x[L]);return N}function c(x,A){var L=x.split("@"),N="";return 1<L.length&&(N=L[0]+"@",x=L[1]),N+v((x=x.replace(n,".")).split("."),A).join(".")}function C(x){for(var A,L,N=[],M=0,$=x.length;M<$;)55296<=(A=x.charCodeAt(M++))&&A<=56319&&M<$?56320==(64512&(L=x.charCodeAt(M++)))?N.push(((1023&A)<<10)+(1023&L)+65536):(N.push(A),M--):N.push(A);return N}function U(x){return v(x,function(A){var L="";return 65535<A&&(L+=s((A-=65536)>>>10&1023|55296),A=56320|1023&A),L+s(A)}).join("")}function T(x,A){return x+22+75*(x<26)-((0!=A)<<5)}function j(x,A,L){var N=0;for(x=L?t(x/700):x>>1,x+=t(x/A);455<x;N+=a)x=t(x/35);return t(N+36*x/(x+38))}function k(x){var A,L,N,M,$,_,E,V=[],W=x.length,J=0,B=128,X=72,z=x.lastIndexOf("-");for(z<0&&(z=0),L=0;L<z;++L)128<=x.charCodeAt(L)&&m("not-basic"),V.push(x.charCodeAt(L));for(N=0<z?z+1:0;N<W;){for(M=J,$=1,_=a;W<=N&&m("invalid-input"),E=x.charCodeAt(N++),(a<=(E=E-48<10?E-22:E-65<26?E-65:E-97<26?E-97:a)||E>t((g-J)/$))&&m("overflow"),J+=E*$,!(E<(E=_<=X?1:X+26<=_?26:_-X));_+=a)$>t(g/(E=a-E))&&m("overflow"),$*=E;X=j(J-M,A=V.length+1,0==M),t(J/A)>g-B&&m("overflow"),B+=t(J/A),J%=A,V.splice(J++,0,B)}return U(V)}function I(x){for(var A,L,N,M,$,_,E,V,W,J,B=[],X=(x=C(x)).length,z=128,et=72,G=A=0;G<X;++G)(E=x[G])<128&&B.push(s(E));for(L=N=B.length,N&&B.push("-");L<X;){for(M=g,G=0;G<X;++G)z<=(E=x[G])&&E<M&&(M=E);for(M-z>t((g-A)/(V=L+1))&&m("overflow"),A+=(M-z)*V,z=M,G=0;G<X;++G)if((E=x[G])<z&&++A>g&&m("overflow"),E==z){for($=A,_=a;!($<(W=_<=et?1:et+26<=_?26:_-et));_+=a)B.push(s(T(W+(J=$-W)%(W=a-W),0))),$=t(J/W);B.push(s(T($,0))),et=j(A,V,L==N),A=0,++L}++A,++z}return B.join("")}if(f={version:"1.3.2",ucs2:{decode:C,encode:U},decode:k,encode:I,toASCII:function(x){return c(x,function(A){return p.test(A)?"xn--"+I(A):A})},toUnicode:function(x){return c(x,function(A){return d.test(A)?k(A.slice(4).toLowerCase()):A})}},y&&w)if(q.exports==y)w.exports=f;else for(h in f)f.hasOwnProperty(h)&&(y[h]=f[h]);else b.punycode=f}(this)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(P,q,R){"use strict";q.exports=function(b,y,w,u){w=w||"=";var f={};if("string"!=typeof b||0===b.length)return f;var h=/\+/g;b=b.split(y=y||"&"),y=1e3,u&&"number"==typeof u.maxKeys&&(y=u.maxKeys);var g=b.length;0<y&&y<g&&(g=y);for(var a=0;a<g;++a){var l,i=0<=(i=(r=b[a].replace(h,"%20")).indexOf(w))?(l=r.substr(0,i),r.substr(i+1)):(l=r,""),r=decodeURIComponent(l);i=decodeURIComponent(i),Object.prototype.hasOwnProperty.call(f,r)?S(f[r])?f[r].push(i):f[r]=[f[r],i]:f[r]=i}return f};var S=Array.isArray||function(b){return"[object Array]"===Object.prototype.toString.call(b)}},{}],12:[function(P,q,R){"use strict";function S(u){switch(typeof u){case"string":return u;case"boolean":return u?"true":"false";case"number":return isFinite(u)?u:"";default:return""}}q.exports=function(u,f,h,g){return f=f||"&",h=h||"=","object"==typeof(u=null===u?void 0:u)?y(w(u),function(a){var l=encodeURIComponent(S(a))+h;return b(u[a])?y(u[a],function(r){return l+encodeURIComponent(S(r))}).join(f):l+encodeURIComponent(S(u[a]))}).join(f):g?encodeURIComponent(S(g))+h+encodeURIComponent(S(u)):""};var b=Array.isArray||function(u){return"[object Array]"===Object.prototype.toString.call(u)};function y(u,f){if(u.map)return u.map(f);for(var h=[],g=0;g<u.length;g++)h.push(f(u[g],g));return h}var w=Object.keys||function(u){var f,h=[];for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&h.push(f);return h}},{}],13:[function(P,q,R){"use strict";R.decode=R.parse=P("./decode"),R.encode=R.stringify=P("./encode")},{"./decode":11,"./encode":12}],14:[function(P,q,R){"use strict";var y=[new RegExp("^<h3[^>]*>This page contains the following errors:</h3><div[^>]*>(.+?)\n?</div>"),new RegExp("^(.+)\n")];R.failOnParseError=function(w){return function(w){if(null===w)throw new Error("Parse error");if(void 0!==(w="parsererror"===(w=w).documentElement.tagName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"===w.documentElement.namespaceURI?w.documentElement:("xml"===w.documentElement.tagName||"html"===w.documentElement.tagName)&&w.documentElement.childNodes&&0<w.documentElement.childNodes.length&&"parsererror"===w.documentElement.childNodes[0].nodeName?w.documentElement.childNodes[0]:"html"===w.documentElement.tagName&&w.documentElement.childNodes&&0<w.documentElement.childNodes.length&&"body"===w.documentElement.childNodes[0].nodeName&&w.documentElement.childNodes[0].childNodes&&w.documentElement.childNodes[0].childNodes.length&&"parsererror"===w.documentElement.childNodes[0].childNodes[0].nodeName?w.documentElement.childNodes[0].childNodes[0]:void 0))throw w=function(u){for(var f,h=function(w){var u=new XMLSerializer;return Array.prototype.map.call(w.childNodes,function(f){return u.serializeToString(f)}).join("")}(u),g=0;g<y.length;g++)if(f=y[g].exec(h))return f[1]}(w)||"Parse error",new Error(w)}(w),w}},{}],15:[function(P,q,R){"use strict";var S=P("punycode"),b=P("./util");function y(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}R.parse=o,R.resolve=function(e,t){return o(e,!1,!0).resolve(t)},R.resolveObject=function(e,t){return e?o(e,!1,!0).resolveObject(t):t},R.format=function(e){return b.isString(e)&&(e=o(e)),e instanceof y?e.format():y.prototype.format.call(e)},R.Url=y;var w=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=(R=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),["'"].concat(R)),g=["%","/","?",";","#"].concat(h),a=["/","?","#"],l=/^[+a-z0-9A-Z_-]{0,63}$/,r=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,i={javascript:!0,"javascript:":!0},d={javascript:!0,"javascript:":!0},p={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},n=P("querystring");function o(e,t,s){if(e&&b.isObject(e)&&e instanceof y)return e;var m=new y;return m.parse(e,t,s),m}y.prototype.parse=function(e,t,s){if(!b.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var m,v=-1!==(m=e.indexOf("?"))&&m<e.indexOf("#")?"?":"#";(m=e.split(v))[0]=m[0].replace(/\\/g,"/");var C,U,X,c=(c=e=m.join(v)).trim();if(!s&&1===e.split("#").length&&(U=f.exec(c)))return this.path=c,this.href=c,this.pathname=U[1],U[2]?(this.search=U[2],this.query=t?n.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this;if((U=w.exec(c))&&(X=(U=U[0]).toLowerCase(),this.protocol=X,c=c.substr(U.length)),(s||U||c.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(C="//"===c.substr(0,2))||U&&d[U]||(c=c.substr(2),this.slashes=!0)),!d[U]&&(C||U&&!p[U])){for(var T=-1,j=0;j<a.length;j++)-1!==(k=c.indexOf(a[j]))&&(-1===T||k<T)&&(T=k);var k,z;for(-1!==(V=-1===T?c.lastIndexOf("@"):c.lastIndexOf("@",T))&&(W=c.slice(0,V),c=c.slice(V+1),this.auth=decodeURIComponent(W)),T=-1,j=0;j<g.length;j++)-1!==(k=c.indexOf(g[j]))&&(-1===T||k<T)&&(T=k);if(-1===T&&(T=c.length),this.host=c.slice(0,T),c=c.slice(T),this.parseHost(),this.hostname=this.hostname||"",!(z="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1]))for(var I=this.hostname.split(/\./),x=(j=0,I.length);j<x;j++){var A=I[j];if(A&&!A.match(l)){for(var L="",N=0,M=A.length;N<M;N++)127<A.charCodeAt(N)?L+="x":L+=A[N];if(!L.match(l)){var $=I.slice(0,j),_=I.slice(j+1),E=A.match(r);E&&($.push(E[1]),_.unshift(E[2])),_.length&&(c="/"+_.join(".")+c),this.hostname=$.join(".");break}}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase(),z||(this.hostname=S.toASCII(this.hostname));var V=this.port?":"+this.port:"",W=this.hostname||"";this.host=W+V,this.href+=this.host,z&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==c[0]&&(c="/"+c))}if(!i[X])for(j=0,x=h.length;j<x;j++){var J,B=h[j];-1!==c.indexOf(B)&&((J=encodeURIComponent(B))===B&&(J=escape(B)),c=c.split(B).join(J))}return-1!==(z=c.indexOf("#"))&&(this.hash=c.substr(z),c=c.slice(0,z)),-1!==(z=c.indexOf("?"))?(this.search=c.substr(z),this.query=c.substr(z+1),t&&(this.query=n.parse(this.query)),c=c.slice(0,z)):t&&(this.search="",this.query={}),c&&(this.pathname=c),p[X]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(V=this.pathname||"")+(X=this.search||"")),this.href=this.format(),this},y.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",s=this.pathname||"",m=this.hash||"",v=!1,c="";return this.host?v=e+this.host:this.hostname&&(v=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(v+=":"+this.port)),this.query&&b.isObject(this.query)&&Object.keys(this.query).length&&(c=n.stringify(this.query)),c=this.search||c&&"?"+c||"",t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||p[t])&&!1!==v?(v="//"+(v||""),s&&"/"!==s.charAt(0)&&(s="/"+s)):v=v||"",m&&"#"!==m.charAt(0)&&(m="#"+m),c&&"?"!==c.charAt(0)&&(c="?"+c),t+v+(s=s.replace(/[?#]/g,function(C){return encodeURIComponent(C)}))+(c=c.replace("#","%23"))+m},y.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},y.prototype.resolveObject=function(e){b.isString(e)&&((x=new y).parse(e,!1,!0),e=x);for(var t=new y,s=Object.keys(this),m=0;m<s.length;m++){var v=s[m];t[v]=this[v]}if(t.hash=e.hash,""===e.href)return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),C=0;C<c.length;C++){var U=c[C];"protocol"!==U&&(t[U]=e[U])}return p[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!p[e.protocol]){for(var T=Object.keys(e),j=0;j<T.length;j++){var k=T[j];t[k]=e[k]}return t.href=t.format(),t}if(t.protocol=e.protocol,e.host||d[e.protocol])t.pathname=e.pathname;else{for(var M=(e.pathname||"").split("/");M.length&&!(e.host=M.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==M[0]&&M.unshift(""),M.length<2&&M.unshift(""),t.pathname=M.join("/")}return t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,(t.pathname||t.search)&&(t.path=(A=t.pathname||"")+(L=t.search||"")),t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var V,I=t.pathname&&"/"===t.pathname.charAt(0),A=(x=e.host||e.pathname&&"/"===e.pathname.charAt(0))||I||t.host&&e.pathname,L=A,N=t.pathname&&t.pathname.split("/")||[];if(M=e.pathname&&e.pathname.split("/")||[],(I=t.protocol&&!p[t.protocol])&&(t.hostname="",t.port=null,t.host&&(""===N[0]?N[0]=t.host:N.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===M[0]?M[0]=e.host:M.unshift(e.host)),e.host=null),A=A&&(""===M[0]||""===N[0])),x)t.host=(e.host||""===e.host?e:t).host,t.hostname=(e.hostname||""===e.hostname?e:t).hostname,t.search=e.search,t.query=e.query,N=M;else if(M.length)(N=N||[]).pop(),N=N.concat(M),t.search=e.search,t.query=e.query;else if(!b.isNullOrUndefined(e.search))return I&&(t.hostname=t.host=N.shift(),(V=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=V.shift(),t.host=t.hostname=V.shift())),t.search=e.search,t.query=e.query,b.isNull(t.pathname)&&b.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.href=t.format(),t;if(!N.length)return t.pathname=null,t.path=t.search?"/"+t.search:null,t.href=t.format(),t;for(var $=N.slice(-1)[0],x=(t.host||e.host||1<N.length)&&("."===$||".."===$)||""===$,_=0,E=N.length;0<=E;E--)"."===($=N[E])?N.splice(E,1):".."===$?(N.splice(E,1),_++):_&&(N.splice(E,1),_--);if(!A&&!L)for(;_--;)N.unshift("..");return!A||""===N[0]||N[0]&&"/"===N[0].charAt(0)||N.unshift(""),x&&"/"!==N.join("/").substr(-1)&&N.push(""),x=""===N[0]||N[0]&&"/"===N[0].charAt(0),I&&(t.hostname=t.host=!x&&N.length?N.shift():"",(V=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=V.shift(),t.host=t.hostname=V.shift())),(A=A||t.host&&N.length)&&!x&&N.unshift(""),N.length?t.pathname=N.join("/"):(t.pathname=null,t.path=null),b.isNull(t.pathname)&&b.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t},y.prototype.parseHost=function(){var e=this.host,t=u.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":16,punycode:10,querystring:13}],16:[function(P,q,R){"use strict";q.exports={isString:function(S){return"string"==typeof S},isObject:function(S){return"object"==typeof S&&null!==S},isNull:function(S){return null===S},isNullOrUndefined:function(S){return null==S}}},{}],17:[function(P,q,R){var b;b=function(){var u=function(a){var l=a.tagName;return"http://www.w3.org/1999/xhtml"===a.namespaceURI?l.toLowerCase():l},h=function(a){return Array.prototype.map.call(a.childNodes,function(l){return g(l)}).join("")},g=function(a,l){var r,d,i=l&&l.rootNode;return"#document"===a.nodeName||"#document-fragment"===a.nodeName?h(a):a.tagName?(l=i,r="<"+u(i=a),r+=function(a,l){return 0<=Array.prototype.map.call(a.attributes||a.attrs,function(r){return r.name}).indexOf("xmlns")||!l&&a.namespaceURI===a.parentNode.namespaceURI?"":' xmlns="'+a.namespaceURI+'"'}(i,l),Array.prototype.forEach.call(i.attributes||i.attrs,function(d){r+=function(a){return" "+a.name+'="'+a.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+'"'}(d)}),0<i.childNodes.length?(r+=">",r+=h(i),r+="</"+u(i)+">"):r+="/>",r):"#text"===a.nodeName?function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(d=(d=a).nodeValue||d.value||""):"#comment"===a.nodeName?"\x3c!--"+a.data.replace(/-/g,"&#45;")+"--\x3e":"#cdata-section"===a.nodeName?"<![CDATA["+a.nodeValue+"]]>":void 0};return{serializeToString:function(a){return g(a,{rootNode:!0}).replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]/g,"")}}},"object"==typeof q&&q.exports?q.exports=b():this.xmlserializer=b()},{}]},{},[1])(1)});